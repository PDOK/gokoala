{{ define "content" }}
    <link rel="stylesheet" type="text/css" href="view-component/styles.css">
    <script src="view-component/polyfills.js"></script>
    <script type="module" src="view-component/main.js"></script>
    <hgroup>
        <h1 class="title" id="title">{{ .Config.Title }} - Locatie API</h1>
    </hgroup>
    <section class="row py-3" x-data="{itemsUrl: '', projection: 'http://www.opengis.net/def/crs/OGC/1.3/CRS84'}">
        <div class="col-md-6 col-sm-12">
            <div class="card mb-3">
                <h2 class="card-header h5">
                    {{ i18n "Search" }}
                </h2>
                <div class="card-body">
                    <p>
                        {{ i18n "SearchText" }}
                    </p>
                </div>
            </div>
            <!-- filters -->
            <div id="form" class="col-12">
                <div class="row">
                    <div class="col">
                        <app-location-search-view
                                x-bind:projection="projection"
                                searchingText="{{ i18n "Searching" }}"
                                noResultsText="{{ i18n "NoResultsFound" }}"
                                collectionText="{{ i18n "Collections" }}"
                                relevanceText="{{ i18n "Relevance" }}"
                                placeholder="{{ i18n "SearchByLocation" }}"
                                @location-selected.camel="itemsUrl = $event.detail"
                                @query-changed="query = $event.detail"
                                class="d-block"
                        ></app-location-search-view>
                    </div>
                </div>
                <hr/>
                <!-- projection -->
                <div class="row mb-2">
                    <label for="srs-select" class="col-sm-4 col-form-label"><abbr title="{{ i18n "CrsAbbr" }}">CRS</abbr></label>
                    <div class="col-sm">
                        <select id="srs-select" class="form-select" x-model="projection">
                            <option value="http://www.opengis.net/def/crs/OGC/1.3/CRS84" selected>
                                http://www.opengis.net/def/crs/OGC/1.3/CRS84
                            </option>
                            {{ if .Config.OgcAPI.Features }}
                                {{ range $index, $srs := .Config.OgcAPI.Features.CollectionsSRS }}
                                    <option value="http://www.opengis.net/def/crs/EPSG/0/{{ trimPrefix "EPSG:" $srs }}">http://www.opengis.net/def/crs/EPSG/0/{{ trimPrefix "EPSG:" $srs }}</option>
                                {{ end }}
                            {{ end }}
                        </select>
                    </div>
                </div>
                <div class="row mb-4">
                    <label for="current-url" class="col-sm-4 col-form-label">{{ i18n "CurrentUrl" }}</label>
                    <div class="col-sm-8">
                        <input id="current-url" type="text" class="form-control" x-bind:value="itemsUrl || '-'" readonly/>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-sm-12">
            <app-feature-view
                    x-bind:projection="projection"
                    x-bind:items-url="itemsUrl"
                    background-map="BRT"
                    mode="auto"
                    class="card"
                    initial-view="VISIBLE"
            > </app-feature-view>
        </div>
    </section>
{{ end }}